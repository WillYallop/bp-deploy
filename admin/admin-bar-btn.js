(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector("#wp-admin-bar-bp-deploy a");e&&e.addEventListener("click",(function(n){n.preventDefault();var t=document.getElementById("bp__admin-bar-nonce").getAttribute("nonce")||"";e.innerText="Triggering deploy...",fetch("/wp-json/bp-deploy/v1/deploy",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":t}}).then((function(e){return e.json()})).then((function(n){"error"===n.status||"rest_cookie_invalid_nonce"===n.code?(e.innerText="Unexpected error",setTimeout((function(){e.innerText="Trigger Deploy"}),3e3)):window.location.href="/wp-admin/options-general.php?page=bp-deploy&tab=history"})).catch((function(n){e.innerText="Unexpected error",setTimeout((function(){e.innerText="Trigger Deploy"}),3e3),console.error("Error:",n)}))}))}))})();